(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,a){},134:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(64),l=t.n(o),c=(t(78),t(6)),s=t(7),i=t(9),u=t(8),m=t(10),d=t(4),p=t(140),h=(t(82),t(136)),b=function(e){return r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.a,{className:"nav-link",exact:!0,to:e.item.link},e.item.linkName))},f=Object(d.b)(function(e){return{auth:e.auth}})(function(e){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-expand-xl navbar-dark bg-dark"},r.a.createElement(h.a,{exact:!0,className:"navbar-brand",to:"/"},"Code4Share"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav"},e.items.map(function(e){return r.a.createElement(b,{item:e,key:e.linkName})})),e.auth.data?r.a.createElement("div",{className:"ml-auto btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.auth.data.data.name),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement(h.a,{exact:!0,className:"dropdown-item",to:"/logout"},"Logout"))):r.a.createElement("ul",{className:"nav navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.a,{exact:!0,className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.a,{exact:!0,className:"nav-link",to:"/register"},"Register")))))}),g=function(e){return r.a.createElement(f,{items:e.items})},E=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{items:[{link:"/",linkName:"Home"},{link:"/about",linkName:"About"},{link:"/contact",linkName:"Contact"}]}),r.a.createElement("main",null,this.props.children))}}]),a}(r.a.Component),v=t(139),O=t(66),y=t(138),w=t(44);function N(e){return console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"This is Code4Share \xa9AshuGhildiyal"),e.auth.data?r.a.createElement(w.a,{to:"/createTask",className:"btn bg-info"},"Create New Task"):null)}var k=function(e){return r.a.createElement("div",null,"Welcome To CodeShare You can share your created Tasks link with your friend and start coding with them in parallel")},j=t(22),C=t(16),S=t.n(C),T=S.a.create({});T.defaults.withCredentials=!0;var x=T,A=function(e){var a,t=e.elementType,n=e.elementConfig,o=e.label,l=e.inputName,c=e.errors,s=e.touched;switch(t){case"input":a=r.a.createElement("input",Object.assign({name:l,style:c[l]&&s[l]&&{border:"2px solid red"},className:"form-control",id:l,"aria-describedby":"emailHelp"},n));break;case"textarea":a=r.a.createElement("textarea",Object.assign({className:"form-control",id:l},n));break;default:a=r.a.createElement("input",null)}return r.a.createElement("div",{className:"form-group col-md-6 offset-md-3"},r.a.createElement("label",{className:"text-monospace",htmlFor:l},o),a,e.children,c[l]&&s[l]&&r.a.createElement("span",{className:"text-danger"},c[l]))},L=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={isLoading:!1,error:null,data:null,showAlert:!1},t.handleAlert=function(){t.setState({showAlert:!1})},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{initialValues:{name:"",email:"",message:""},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)?e.name||(a.name="Required"):a.email="Invalid email address":a.email="Required",a},onSubmit:function(a,t){var n=t.setSubmitting;e.setState({isLoading:!0}),x.post("/api/contact",a).then(function(a){var t=a.data;200!==t.code&&!1===t.success?e.setState({error:t.message,isLoading:!1,showAlert:!0}):(e.setState({data:t,isLoading:!1}),n(!1))}).catch(function(a){e.setState({isLoading:!1,error:"Server Error"})})}},function(a){var t=a.values,n=a.errors,o=a.touched,l=a.handleChange,c=a.handleBlur,s=a.handleSubmit;a.isSubmitting;return e.state.data&&e.state.data.success?r.a.createElement("h1",null,"Thankyou For Contacting us we will reach to you shortly"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Contact Us"),r.a.createElement("form",{className:"container",onSubmit:s},r.a.createElement("div",{className:"row"},e.state.error?r.a.createElement("div",{className:"col-md-6 offset-md-3 alert alert-warning alert-dismissible fade show",style:e.state.showAlert?{display:"block"}:{display:"none"}},e.state.error,r.a.createElement("button",{type:"button",onClick:e.handleAlert,className:"close","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):null,r.a.createElement(A,{inputName:"name",errors:n,touched:o,elementType:"input",label:"Name",elementConfig:{value:t.name,onChange:l,onBlur:c,type:"text",placeholder:"Enter Name Here"}}),r.a.createElement(A,{inputName:"email",errors:n,touched:o,elementType:"input",label:"Email",elementConfig:{value:t.email,onChange:l,onBlur:c,type:"email",placeholder:"Enter Email Here"}}),r.a.createElement(A,{inputName:"message",errors:n,touched:o,elementType:"textarea",label:"Message",elementConfig:{value:t.message,onChange:l,onBlur:c,rows:"3"}}),r.a.createElement("div",{className:"col-md-6 offset-3"},r.a.createElement("button",{type:"submit",className:"btn btn-info"},"submit".concat(e.state.isLoading?"ting...":""))))))})}}]),a}(r.a.Component),M=t(12),_="AUTH_START",B="AUTH_FAIL",H="AUTH_SUCCESS",R="SUCCESS",U="FAIL";function I(e){return{type:H,payload:{isLoading:!1,data:e}}}function Z(e){return{type:B,payload:{isLoading:!1,error:e}}}var F=function(e,a,t){return function(n){n({type:_,paylaod:{isLoading:!0}}),S.a.post("/api/".concat(a),Object(M.a)({},e)).then(function(e){var a=e.data;console.log(a),200===a.code&&!0===a.success?n(I(a)):n(Z(a.message)),t(!1)}).catch(function(){var e=new Error("Some internal Error Occured");t(!1),n(Z(e.message))})}},P=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{initialValues:{email:"",password:""},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",e.password||(a.password="Required"),a},onSubmit:function(a,t){var n=t.setSubmitting;e.props.authenticate(a,"login",n)}},function(a){var t=a.values,n=a.errors,o=a.touched,l=a.handleChange,c=a.handleBlur,s=a.handleSubmit;a.isSubmitting;return r.a.createElement("form",{className:"container",onSubmit:s},e.props.auth.error&&r.a.createElement("div",{className:"alert alert-danger"},e.props.auth.error),r.a.createElement("h1",{className:"text-center"},"Please Sign In"),r.a.createElement("div",{className:"row"},r.a.createElement(A,{inputName:"email",errors:n,touched:o,elementType:"input",label:"Email",elementConfig:{value:t.email,onChange:l,onBlur:c,type:"email",placeholder:"Enter Email Here"}}),r.a.createElement(A,{inputName:"password",errors:n,touched:o,elementType:"input",label:"password",elementConfig:{value:t.password,onChange:l,onBlur:c,type:"password",placeholder:"Enter password Here"}}),r.a.createElement("div",{className:"col-md-6 col-sm-6 col-6 offset-3"},r.a.createElement("button",{type:"submit",className:"btn btn-info btn-block"},"Login")),r.a.createElement("h4",{className:"col-md-6 col-sm-6 col-6 offset-3 text-center mt-3"},"Or"),r.a.createElement("div",{className:"col-md-6 col-sm-6 col-6 offset-3 mt-3"},r.a.createElement("a",{href:"/auth/facebook",className:"btn bg-success btn-info btn-block"},"Login with Facebook"))))})}}]),a}(r.a.Component),q=Object(p.a)(Object(d.b)(null,function(e){return{authenticate:function(a,t,n){return e(F(a,t,n))}}})(P)),D=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{initialValues:{name:"",email:"",password:"",confirmPassword:""},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",e.name||(a.name="Required"),e.password||(a.password="Required"),e.password!==e.confirmPassword&&(a.confirmPassword="password didn't match"),a},onSubmit:function(a,t){var n=t.setSubmitting;e.props.register(a,"register",n)}},function(e){var a=e.values,t=e.errors,n=e.touched,o=e.handleChange,l=e.handleBlur,c=e.handleSubmit;e.isSubmitting;return r.a.createElement("form",{className:"container",onSubmit:c},r.a.createElement("h1",{className:"text-center"},"New Account"),r.a.createElement("div",{className:"row"},r.a.createElement(A,{inputName:"name",errors:t,touched:n,elementType:"input",label:"Name",elementConfig:{value:a.name,onChange:o,onBlur:l,type:"text",placeholder:"Enter Name Here"}}),r.a.createElement(A,{inputName:"email",errors:t,touched:n,elementType:"input",label:"Email",elementConfig:{value:a.email,onChange:o,onBlur:l,type:"email",placeholder:"Enter Email Here"}}),r.a.createElement(A,{inputName:"password",errors:t,touched:n,elementType:"input",label:"password",elementConfig:{value:a.password,onChange:o,onBlur:l,type:"password",placeholder:"Enter password Here"}}),r.a.createElement(A,{inputName:"confirmPassword",errors:t,touched:n,elementType:"input",label:"confirmPassword",elementConfig:{value:a.confirmPassword,onChange:o,onBlur:l,type:"password",placeholder:"Re-enter password"}}),r.a.createElement("div",{className:"col-sm-6 col-6 col-md-6 offset-3"},r.a.createElement("button",{type:"submit",className:"btn btn-info btn-block"},"SignUp"))))})}}]),a}(r.a.Component),V=Object(p.a)(Object(d.b)(null,function(e){return{register:function(a,t,n){return e(F(a,t,n))}}})(D)),$=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.logout("logout")}},{key:"render",value:function(){return console.log("Logout",this.props),this.props.auth.data||this.props.location.replace("/"),r.a.createElement("h1",null,"Logging you Out......")}}]),a}(r.a.Component),G=Object(p.a)(Object(d.b)(null,function(e){return{logout:function(a){return e(function(e){return function(a){S.a.get("/api/".concat(e)).then(function(e){a({type:"LOG_OUT"})})}}(a))}}})($));function W(e){return{type:R,payload:{data:e}}}function J(e){return{type:U,payload:{error:e}}}var X=Object(p.a)(Object(d.b)(null,function(e){return{createTask:function(){return e(function(e){console.log("calling create Task------"),S.a.get("/api/createTask").then(function(a){var t=a.data;200===t.code&&t.success?e(W(t)):e(J(t.message))}).catch(function(){e(J("some internal error occured"))})})}}})(function(e){e.createTask(),console.log(e);var a=r.a.createElement("h1",null,"Creating Task......");return e.task.data&&(console.log("task------",e.task),a=r.a.createElement(y.a,{to:"/task/".concat(e.task.data.data._id)})),r.a.createElement("div",null,a)})),Y=t(72),z=t(70),K=t.n(z),Q=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).state={username:"",message:"",messages:[]},t.send=function(e){e.preventDefault(),t.socket.emit("sendMessage",{username:t.username,message:t.state.message}),t.setState({message:""})},console.log(t.props),t.username=t.props.auth.data&&t.props.auth.data.data.name||Math.floor(99999*Math.random()).toString(),t.socket=K()("https://lit-depths-22566.herokuapp.com/"),t.socket.emit("joinRoom",{room:t.props.match.params.id,username:t.username}),t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket.on("receiveMessage",function(e){t(e)});var a,t=function(a){console.log(a),e.setState({messages:[].concat(Object(Y.a)(e.state.messages),[a])}),console.log(e.state.messages)};this.props.dispatch((a=this.props.match.params.id,function(e){S.a.get("/api/task/".concat(a)).then(function(a){var t=a.data;200===t.code&&t.success?e(W(t)):e(J(t.message))}).catch(function(){e(J("some internal error occured"))})}));var n=window.CodeMirror.fromTextArea(document.getElementById("code-screen"),{lineNumbers:!0,theme:"monokai"});this.socket.on("doc",function(a){var t,r,o,l;t=a.str,r=a.revision,o=a.clients,l=new window.SocketIOAdapter(e.socket),n.setValue(t),window.cmClient=new window.EditorClient(r,o,l,new window.CodeMirrorAdapter(n))})}},{key:"render",value:function(){var e=this;return this.username=this.props.auth.data&&this.props.auth.data.data.name||Math.floor(99999*Math.random()).toString(),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("textarea",{id:"code-screen"})),r.a.createElement("div",{className:"col-md-4",id:"chat-box"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"CHAT ROOM",r.a.createElement("span",{className:"float-right"},this.username)),r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",{className:"list-unstyled",style:{height:"300px",overflowY:"scroll"}},r.a.createElement("li",{className:"media"},r.a.createElement("div",{className:"media-body",id:"chatbox-listMessages"},this.state.messages.map(function(e,a){return r.a.createElement("div",{key:a},"User-".concat(e.username),": ",e.message)}))))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",placeholder:"Message",className:"form-control",value:this.state.message,onChange:function(a){return e.setState({message:a.target.value})}}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.send},"SEND")))),r.a.createElement("div",null))))}}]),a}(r.a.Component),ee=Object(p.a)(Object(d.b)()(Q)),ae=function(e){return console.log(e),Object(M.a)({},e.children)},te=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,this.props.auth.data?r.a.createElement(ae,null,r.a.createElement(v.a,null,r.a.createElement(O.a,{path:"/",exact:!0,render:function(){return r.a.createElement(N,{auth:e.props.auth})}}),r.a.createElement(O.a,{path:"/about",component:k}),r.a.createElement(O.a,{path:"/contact",component:L}),r.a.createElement(O.a,{path:"/logout",render:function(){return r.a.createElement(G,e.props)}}),r.a.createElement(O.a,{path:"/createTask",render:function(){return r.a.createElement(X,e.props)}}),r.a.createElement(O.a,{path:"/task/:id",render:function(){return r.a.createElement(ee,e.props)}}),r.a.createElement(y.a,{to:"/"}))):r.a.createElement(ae,null,r.a.createElement(v.a,null,r.a.createElement(O.a,{path:"/",exact:!0,render:function(){return r.a.createElement(N,{auth:e.props.auth})}}),r.a.createElement(O.a,{path:"/about",component:k}),r.a.createElement(O.a,{path:"/contact",component:L}),r.a.createElement(O.a,{path:"/login",render:function(){return r.a.createElement(q,e.props)}}),r.a.createElement(O.a,{path:"/register",render:function(){return r.a.createElement(V,e.props)}}),r.a.createElement(O.a,{path:"/task/:id",render:function(){return r.a.createElement(ee,e.props)}}),r.a.createElement(y.a,{to:"/"}))))}}]),a}(r.a.Component),ne=Object(p.a)(Object(d.b)(function(e){return{auth:e.auth,task:e.task}})(te)),re=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.checkLogin("me")}},{key:"render",value:function(){return console.log(this.props),r.a.createElement(E,null,r.a.createElement(ne,null))}}]),a}(n.Component),oe=Object(p.a)(Object(d.b)(null,function(e){return{checkLogin:function(a){return e(function(e){return function(a){S.a.get("/api/".concat(e)).then(function(e){var t=e.data;console.log(t),200===t.code&&t.success?a(I(t)):a(Z(t.message))}).catch(function(e){var t=new Error("internal error");a(Z(t.message))})}}(a))}}})(re));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=t(137),ce=t(17),se=t(71),ie=Object(ce.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:null,error:null},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case _:return Object(M.a)({},e,a.payload);case H:return Object(M.a)({},e,{error:null},a.payload);case B:return Object(M.a)({},e,a.payload);case"LOG_OUT":return Object(M.a)({},e,{isLoading:!1,data:null,error:null});default:return Object(M.a)({},e)}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:null,error:null},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case R:return Object(M.a)({},e,{error:null},a.payload);case U:return Object(M.a)({},e,{data:null},a.payload);default:return Object(M.a)({},e)}}}),ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.d,me=Object(ce.e)(ie,ue(Object(ce.a)(function(e){e.dispatch;return function(e){return function(a){console.log(a),e(a)}}},se.a)));l.a.render(r.a.createElement(d.a,{store:me},r.a.createElement(le.a,null,r.a.createElement(oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},73:function(e,a,t){e.exports=t(134)},78:function(e,a,t){},82:function(e,a,t){}},[[73,1,2]]]);
//# sourceMappingURL=main.d504dd4c.chunk.js.map